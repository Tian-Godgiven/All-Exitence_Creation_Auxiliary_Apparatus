[toc]

# 属性

## 结构

分类与事物均具备属性，创建某个分类的事物时，会使用该分类的属性作为该事物的初始属性，属性是一个对象，包含如下内容

~~~
{
	name:string,//属性名，在不进行相关设置的情况下，属性名会占用属性的左侧空间显示
	value:any,//属性值，具体的内容格式受valueType的影响
	valueType:string,//属性类型，具体内容参见下方
	setting:{},//属性设置，受valueType的影响会产生不同的设置项，参见下方
}
~~~

# 属性类型 valueType

不同属性可以设置不同的属性类型，这会1.影响属性值的类型2.影响属性值的显示方式3.影响属性的一部分设置 4.影响属性的可选设置项

下方会介绍不同属性类型对应的值的类型与含义，以及属性值的显示方式，若该属性存在独特的设置项，也会一同显示设置项的信息

## 输入线 downLine

这是属性的***默认类型***

value为输入的内容

无内容的情况下的一根下划线，输入的内容中也存在下划线  
内容为字符串，支持引入事物对象



## 输入框 inputBox

value为输入的内容

被输入框包裹的输入内容，大量内容时近似文本框  
内容为字符串，支持引入事物对象

| name text               | type     | value | 内容                                             |
| ----------------------- | -------- | ----- | ------------------------------------------------ |
| hoverBox 聚焦显示输入框 | checkBox | false | 当该属性值被点击，进行修改时，是否显示聚焦输入框 |

## 范围选择 range

value为一个数字

两点连线，拖动连线上的一点设定数值  
内容仅能为数字  
需要额外输入min,max和step步长

## 选项选择 choose

value为一个数组，内部的元素为true或false，表示对应setting中的选项的选中或未选中

从给定的若干个选项中选择  
选项内容为字符串，支持引入事物对象
需要额外并输入min,max选择数量，输入若干个选项并指定其是否为默认选项

| name text                        | type                   | value  | 内容                                   |
| -------------------------------- | ---------------------- | ------ | -------------------------------------- |
| chooseByRadio 使用灯开关表达选项 | checkBox               | false  | 使用灯开关在选项前方，而非使用checkBox |
| chooseDirection 选项排列方向     | choose:["竖向","横向"] | "横向" | 选项将按照竖向or横向排列               |

## 选项框 select

value同上为一个bool数组

点击下拉一个选项框，从若干个选项中选择
同上，只是样式不一样

## 滑动开关 switch

value为bool，true表示右，false表示左

一个可以通过点击左右切换值的开关
选项内容为布尔值，但可以设定相关的文字内容
可以选择输入两个布尔值对应的文字，会显示在开关下方

## 灯开关 radio

value为bool，true表示点亮，false表示熄灭

一个可以通过点击点亮或熄灭的开关，是圆形那个
其他同上
可以选项输入文字，显示在开关旁边，用以表示开关点亮时的意义

## 标签 tags

value为一个字符串数组

数组中的每一项依次显示在制式的标签块中，默认还会在末尾显示一个“新增标签”的特殊标签块，可以通过这个标签块快速添加新的标签

| name text | type     | value | 含义                                   |
| --------- | -------- | ----- | -------------------------------------- |
| tagsAdd   | checkBox | true  | 为true时，在标签队列末尾显示“新增标签” |

## 日期 date

要求选择一个已创建的日期格式，或在弹窗中创建一个日期格式（可以保存复用）会显示该日期的输入线和日期单位  
输入内容为字符，但不支持引入事物对象
该类型基于multi类型，可以在额外输入栏选择实际显示的年月日等输入框

## 关联属性 relation

这个属性由多个重复的*单元unit*组成，每个单元都是相同结构的，由多个属性值构成的复合性属性。这些单元unit共享一个根源性的结构：*关联体*，在关联体中定义了单元的属性值结构组成，因此每个单元实际上只需要存储相应的值即可

value为一个对象数组，依次包含每个单元对应的属性值

在setting中存在一个特殊设置 relationSource 关联体，其结构如下
~~~
relationSource:{
	属性A:{ //属性名
		value, //默认值
		valueType, //类型
		setting //设置
	},
	属性B:{value,valueType,setting},……
}
~~~

通常情况下，关联体内至少应当具备一个属性对象

与之对应的单元Unit的值，或者说，关联属性的属性值为

~~~
value:[
	{属性A:value1,属性B:value2} //这就是一个单元的值
	……
]
~~~

在渲染时，会依次渲染每个单元，使用单元的值与关联体的值样式来渲染一整行属性，默认情况下不会渲染关联体内的属性的属性名称，每个单元占据单独的一行或多行，并层叠显示在该关联属性的属性值区域

### 相关设置项

| name text                        | type     | value | 含义                                                         |
| -------------------------------- | -------- | ----- | ------------------------------------------------------------ |
| relationTitle 显示关联属性标题   | checkbox | true  | 为true时会在属性值的顶部显示数个类似表格标题的文本，对应这一列属性的属性名 |
| relationAdd 允许添加新的关联单元 | checkbox | true  | 为true时会在属性值的右上角显示一个[+]键，点击该按键会在关联属性顶部新增一个空的单元unit |

## 复合属性 multi 

这个属性的值包含多个*部分part*，表现为多个输入框、根据已有的非复合属性计算得到的数值或提示性的文字内容
value为一个数组，依次包含这些*部分part*的对象

可以将每个*部分part*视作一个简化的属性值statusValue，其包含如下内容

| 键        | 值:默认值 | 含义                                                         |
| --------- | --------- | ------------------------------------------------------------ |
| key       | string    | 可选，这个part的键，用于在该复合属性中索引到该part           |
| value     | any       | 这个part的值                                                 |
| valueType | 见下表    | 这个part的值的类型，可选类型参见下方，其也决定的该part的值的内容 |

multi属性值中的part的valueType

| valueType   | value类型       | 含义                                                         |
| ----------- | --------------- | ------------------------------------------------------------ |
| text        | 文本            | 文本                                                         |
| quoteStatus | 引用属性的__key | 引用属性，选择同一分类下的任意属性，引用其属性值并显示在该部分 |
| quotePart   | 引用部分的key值 | 引用部分，选择该multi属性下的另一个部分，引用其值并显示在该部分 |
| enterLine   | 无              | 换行，该部分part作为占位符，使得下一个部分显示在下一行       |
| expression  | 表达式的值      | 特殊表达式，在弹窗中输入相应的multiStatus表达式并显示该表达式返回的值，其值与效果详见[multi复合属性表达式]([../../../../../功能设计\特殊表达式\multi复合属性表达式.md) |
| statusValue | 属性对象本身    | 创建一个非嵌套非复合属性，这个属性的属性名会作为key，其值将会显示在该部分的位置 |

以下为复合属性的专属设置项

| name text | type | value | 含义 |
| --------- | ---- | ----- | ---- |
|           |      |       |      |
|           |      |       |      |
|           |      |       |      |



## 嵌套属性 status 

该属性为作为亲属性，其内部嵌套了其他属性，内部可以嵌套包括嵌套属性在内的所有属性

属性值即为该属性的



需要在弹出的嵌套页面中设定这些子属性的内容，子属性允许继续嵌套

# 属性设置 

属性的设置与其他对象的设置类似，也是一个保存着键值对的对象，默认情况下属性设置为空，只有在进行了设置后才会向其中添加设置项，属性设置项结构与常见的设置项类似

一些valueType的属性自身便具备一部分关键设置，请注意新增的设置不可以与之重名

| 键        | 值                 | valueType       | 含义                         |
| --------- | ------------------ | --------------- | ---------------------------- |
| chooseNum | num[min,max]       | choose / select | 该属性的可选数量的最大最小值 |
| choices   | string[]           | choose / select | 选项文本数组                 |
| range     | num[min,max,step]  | range           | 范围数组                     |
| switch    | string[left,right] | swicth          | 分别是左侧和右侧的文本       |
| radio     | sting              | radio           | 显示在灯开关左侧的文本       |

另外，也存在一些关键设置用于辅助对事物设置的执行，这些设置的键会带有关键字：`exitenceSetting-`的前缀，事物设置中则不带有该前缀，下表中会省略该前缀，请注意区分

| 键           | 值                | 事物设置 | 含义                           |
| ------------ | ----------------- | -------- | ------------------------------ |
| syncWithName | [分类key,事物key] | 同名     | 表示该属性的值与事物的名称同步 |
| nickName     | 同上              | 同名     | 表示该属性的值作为事物的别名   |

## 属性设置项

属性的设置项存放在`data/list/setStatusOptionsList.ts`中

除了上述提到的关键设置项，还存在一些属性设置项，可以由用户进行设定，不同的valueType具备不同的属性设置项，其中专属于某种valueType的设置项在上述的对应valueType介绍中，下表中分别展示无条件和多个条件的设置项

### 无条件设置项

| name text                                   | type                             | value       | 内容                                                         |
| ------------------------------------------- | -------------------------------- | ----------- | ------------------------------------------------------------ |
| exitenceBox 事物包围框                      | input2:["事物左侧:","事物右侧:"] | ["[" , "]"] | 该属性值中出现事物对象时，出现在事物对象两侧的内容           |
| unit 单位                                   | input                            | null        | 出现在属性值末尾的单位内容                                   |
| insteadOfName 取代属性名                    | input                            | null        | 输入内容会取代该属性名占位显示，不接受空值，如不希望显示属性名，请使用下方的“不显示属性名”设置 |
| noStatusNameInExitence 在事物中不显示属性名 | checkbox                         | false       | 若为true，则不会显示对应属性的属性名，其左侧空间会被属性值占用 |
|                                             |                                  |             |                                                              |

### 有条件设置

| name text                                 | type     | value | 条件                         | 内容                                           |
| ----------------------------------------- | -------- | ----- | ---------------------------- | ---------------------------------------------- |
| inputPlaceholder 属性值为空时的占位符     | input    | null  | 属性类型为downLine或inputBox | 当属性值为空时在属性值的输入区域显示的占位符   |
| ifGlobalInputSuggestion 启用全局输入建议  | checkBox | true  | 同上                         | 为true时，属性值的输入区域内会调用全局输入建议 |
| ifProjectInputSuggestion 启用项目输入建议 | checkBox | true  | 同上                         | 为true时，属性值的输入区域内会调用项目输入建议 |
|                                           |          |       |                              |                                                |
