[toc]

# 输入提示

监听特定的输入框的input内容，并与[输入提示表]的内容进行比对，比对顺序为：事物的text→事物的manual数组→事物的nickName数组→下一个事物→字符串→分类

当比对结果为需要进行提示时，在页面上的相应位置显示[输入提示div]，也会在输入辅助框产生相应的提示。通过点击选择相应的提示后，产生对应的功能：包括补全剩余内容和建立跳转

建立跳转的本质是在文本内容中创建一个特殊类型div：jumpDiv，详见[特殊表达式/文本内容表达式]。在点击这些div时，会通过寻找到其所绑定的目标事物，并弹出弹窗显示该事物，注意：在该界面无法对事物的属性进行变更。

## 数据结构

输入提示主要包括两种结构：输入提示vue 和 输入提示表。前者是软件运行过程中，创建输入提示Vue和启用输入提示功能需要的数据结构，后者是将输入提示的内容保存在文件中的数据结构。在输入提示工作的过程中，会将输入提示表中的内容翻译为输入提示vue的形式。

输入提示表的结构颇为复杂，因此放在下面额外说明，这里介绍输入提示vue的结构

### 输入提示vue

这些数据会在输入提示的vue组件中加载成一个个小方块，并在调用输入提示点击方法时作为变量使用

~~~
text:string //默认显示在输入提示div的标题
type:"string"|"exitence"//该输入提示的类型
showText?:string //若不为空，则替代text显示的内容
info?:string //显示在标题下的说明性内容
target?:any //输入提示的跳转目标，用于构建跳转div
attr?:any //一个特殊标识符，目前用于标识别名
~~~

## 方法

### 创建输入提示

1.自动创建

在新增事物时，选择事物设置：“创建输入提示”，即可创建一个关键字为该事物名称的事物类型输入提示（注意：该设置默认为开启）
若该事物同时设置了别名，则还会分别使用别名作为关键字创建该事物的事物类型输入提示

上述的每种输入提示都对应地保存在该事物所在项目的输入提示表中

2.手动创建

可以手动选择事物为其创建输入提示，并保存在该事物所在的项目的输入提示表中

也可以创建字符类型的输入提示，可以选择将该输入提示保存在全局或当前项目中（默认保存在全局中）



# 输入提示表

软件内运行时输入提示表分为两个部分：当前项目的输入提示表，全局的输入提示表

项目的输入提示表位于：`@/data/projects/[项目名称]/data/inputSuggestionList.json`  
全局的输入提示表仅限于非事物类型：`@/data/appData/inputSuggestionList.json`

输入提示表是一个对象，以输入提示目标的类型作为区分

~~~
{
	string:item[],
	exitence:{__key:item[]},
	type:{__key:item},
}
~~~

其基本单元输入提示项(item)的基本结构如下

```{}
type自动:string //该输入提示项的类型，自动生成
click自动:func //点击该输入提示时发生的事件，详见下方各类型的click事件
target?:any //该输入提示的关联对象，默认作为click的第二个参数
```

其中type是输入提示项的核心内容，所有输入提示项根据type类型进行区分，依次存在于输入提示表的对应位置

## 输入提示项的类型

### 1.字符串 string

string类型的输入提示项会被放置在该类型的数组中，其包含如下内容

~~~
text:string //输入提示的文本
showText:string //替代text显示在输入提示框的文本，实际上补全的仍然是text
info:string //显示在输入提示性内的说明性文本
~~~

#### click事件

点击将在相应的文本位置补全`text`剩余的内容

### 2.事物对象 exitence

exitence类型的输入提示会被放置在该类型的对象中，结构为：

~~~
exitence:{
	该事物的__key值:[ 
		{item} //事物对象本身固定放置在第一位
	],
    ……
}
~~~

`{item}`为如下内容

~~~
target:事物所在的分类的__key
text:string //事物的名称，在加载该数据时产生，不会保存在文件中，当对应事物的名称更新时会更新该值
info:string //说明性文本
manual:{
	text:string,
	info:string
} //手动创建的事物输入提示关键字,附赠信息
nickName:string[] //事物的别名数组，在加载该数据时产生，不会保存在文件中
~~~

#### click事件

点击将在相应的文本位置补全事物的名称或别名，同时创建该事物的跳转div

### 3.分类对象 type

## 更新输入提示表

事物对象的名称与别名属性发生更新时，会同步更新该事物的输入提示表
